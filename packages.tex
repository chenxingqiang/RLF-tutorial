% input encoding
\usepackage[utf8]{inputenc}

%--------------------------------------------
% Font encoding
%--------------------------------------------
\usepackage[T1]{fontenc} % Schriftherkunft

%--------------------------------------------
% Code listings
%--------------------------------------------
\usepackage{listings}
\usepackage{xcolor}

% For better code display with tcolorbox and minted
\usepackage{tcolorbox}
\tcbuselibrary{minted,breakable,xparse,skins}
\usepackage{minted}

% Define colors for code boxes
\definecolor{bg}{gray}{0.95}

% Define beautiful code box - optimized for beamer slides
\DeclareTCBListing{mintedbox}{O{}m!O{}}{%
  breakable=true,
  listing engine=minted,
  listing only,
  minted language=#2,
  minted style=default,
  minted options={%
    linenos,
    gobble=0,
    breaklines=true,
    breakafter=,,
    fontsize=\footnotesize,
    numbersep=5pt,
    autogobble=true,
    #1},
  boxsep=0pt,
  left skip=0pt,
  right skip=0pt,
  left=20pt,
  right=0pt,
  top=2pt,
  bottom=2pt,
  arc=3pt,
  leftrule=0pt,
  rightrule=0pt,
  bottomrule=1pt,
  toprule=1pt,
  colback=bg,
  colframe=orange!70,
  width=\textwidth-10pt,
  nobeforeafter=true,
  size=minimal,
  enhanced,
  overlay={%
    \begin{tcbclipinterior}
    \fill[orange!20!white] (frame.south west) rectangle ([xshift=15pt]frame.north west);
    \end{tcbclipinterior}},
  #3,
}

% Basic listings settings (for compatibility)
\lstset{
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue},
  commentstyle=\color{gray},
  breaklines=true,
  showstringspaces=false,
  frame=single,
  frameround=tttt
}

% package for the English language
\usepackage[english]{babel}

% default graphics path
\graphicspath{{logos/}{figures/}}

% package to create diagrams and plot with TikZ
\usepackage{pgfplots}
% always use the newest version
\pgfplotsset{compat=newest}
% define the style of the connection of two lines
\pgfplotsset{every axis/.append style={line join=bevel}}
% generate a new style template
\mode<beamer>{
	\pgfplotsset{
		beamer/.style={
			width=0.8\textwidth,
			height=0.45\textwidth,
			legend style={font=\scriptsize},
			tick label style={font=\footnotesize},
			label style={font=\small},
			max space between ticks=28,
		}
	}
}
\mode<handout>{
	\pgfplotsset{
		beamer/.style={
			width=0.8\textwidth,
			height=0.45\textwidth,
			legend style={font=\scriptsize},
			tick label style={font=\footnotesize},
			label style={font=\small},
			max space between ticks=25,
		}
	}
}
\mode<article>{
	\pgfplotsset{
		beamer/.style={
			width=0.8\textwidth,
			height=0.45\textwidth,
			max space between ticks=35,
		}
	}
}
% format and size template for two plots side-by-side
\pgfplotsset{
	scriptsize/.style={
		width=0.34\textwidth,
		height=0.1768\textwidth,
		legend style={font=\scriptsize},
		tick label style={font=\scriptsize},
		label style={font=\footnotesize},
		title style={font=\footnotesize},
		every axis title shift=0pt,
		max space between ticks=25,
		every mark/.append style={mark size=7},
		major tick length=0.1cm,
		minor tick length=0.066cm,
	}
}
\pgfplotsset{
	small/.style={
		width=6.5cm,
		height=,
		tick label style={font=\footnotesize},
		label style={font=\small},
		legend style={font=\footnotesize},
		max space between ticks=30,
	}
}
% align legends entries to the left
\pgfplotsset{legend cell align=left}
% draw a main grid
\pgfplotsset{xmajorgrids}
\pgfplotsset{ymajorgrids}
% number of minor ticks between two major tickmarks
%\pgfplotsset{minor x tick num={3}}
%\pgfplotsset{minor y tick num={3}}
% draw a minor grid
%\pgfplotsset{xminorgrids}
%\pgfplotsset{yminorgrids}
% scale only the axis using a certain width and height
\pgfplotsset{scale only axis}
% define colors like in MATLAB
\definecolor{matlab1}{rgb}{0,0,1}
\definecolor{matlab2}{rgb}{0,0.5,0}
\definecolor{matlab3}{rgb}{1,0,0}
\definecolor{matlab4}{rgb}{0,0.75,0.75}
\definecolor{matlab5}{rgb}{0.75,0,0.75}
\definecolor{matlab6}{rgb}{0.75,0.75,0}
\definecolor{matlab7}{rgb}{0.25,0.25,0.25}
% define a color cycle list like in MATLAB
\pgfplotscreateplotcyclelist{matlab}{
	{matlab1,solid},
	{matlab2,dashed},
	{matlab3,dashdotted},
	{matlab4,dotted},
	{matlab5,densely dashed},
	{matlab6,densely dashdotted},
	{matlab7,densely dotted}%this prevents an error
}
% use the earlier defined color list
\pgfplotsset{cycle list name=matlab}
% use the standard color list of pgfplots
%\pgfplotsset{cycle list name=color list}
% use only grayscale lines
%\pgfplotsset{cycle list name=linestyles}
% use a line width of 1pt
\pgfplotsset{every axis plot/.append style={line width=1pt}}
% use a comma as the dot separator for german documents
\addto\extrasngerman{\pgfplotsset{/pgf/number format/.cd,set decimal separator={{{,}}}}}
% use a half space as the 1000 separator
\pgfplotsset{/pgf/number format/.cd,1000 sep={\,}}
% define legend positions
\pgfplotsset{/pgfplots/legend pos/north/.style={/pgfplots/legend style={at={(0.50,0.97)},anchor=north}}}
\pgfplotsset{/pgfplots/legend pos/south/.style={/pgfplots/legend style={at={(0.50,0.03)},anchor=south}}}
\pgfplotsset{/pgfplots/legend pos/east/.style={/pgfplots/legend style={at={(0.97,0.50)},anchor=east}}}
\pgfplotsset{/pgfplots/legend pos/west/.style={/pgfplots/legend style={at={(0.03,0.50)},anchor=west}}}
\pgfplotsset{/pgfplots/legend pos/outer north/.style={/pgfplots/legend style={at={(0.50,1.03)},anchor=south}}}

% package for SI units
\usepackage{siunitx}
% real fractions
\sisetup{per-mode=fraction,mode=math}
% decimal marker in dependence from the language
\addto\extrasngerman{\sisetup{output-decimal-marker={,}}}
\addto\extrasenglish{\sisetup{output-decimal-marker={.}}}
% range phrase in dependence from the language
\addto\extrasngerman{\sisetup{range-phrase={ bis~}}} 
\addto\extrasenglish{\sisetup{range-phrase={ to~}}}

% A stand-alone package that implements several commands for including external animation and sound
% files in a pdf document. The package can be used together with both dvips plus ps2pdf and pdflatex,
% though the special sound support is available only in pdflatex.
\usepackage{multimedia}

% package to dissable floating in the article mode
\usepackage{float}

% package to change the line spacing
\usepackage{setspace}

% package for nice fractions in the text mode
\usepackage{xfrac}
% Comment out the problematic command
% \UseCollection{xfrac}{plainmath}

% nicer tables
\usepackage{booktabs}

% nicer quotation marks
\usepackage{csquotes}

% define labeling environment
\makeatletter
\newenvironment{labeling}[2][]{%
  \def\sc@septext{#1}%
  \list{}{\settowidth{\labelwidth}{{%
        #2%
          \sc@septext%
      }}%
    \leftmargin\labelwidth \advance\leftmargin by \labelsep
    \let\makelabel\labelinglabel
  }%
}{%
  \endlist
}
\newcommand\labelinglabel[1]{%
  #1\hfil
    \sc@septext%
}
\makeatother

% 暂时注释掉BibLaTeX设置，因为没有参考文献需要引用
% \usepackage[%
% 	style=ieee,%				format as used at the IEEE
% 	backend=biber,%			suppress warning
% ]{biblatex}

% database of references
% \addbibresource{literature.bib}

% How to remove some pages from navigation bullets in beamer?
% see: https://tex.stackexchange.com/questions/37127/how-to-remove-some-pages-from-the-navigation-bullets-in-beamer
\makeatletter
\let\beamer@writeslidentry@miniframeson=\beamer@writeslidentry
\def\beamer@writeslidentry@miniframesoff{%
	\expandafter\beamer@ifempty\expandafter{\beamer@framestartpage}{}% does not happen normally
	{%else
		% removed \addtocontents commands
		\clearpage\beamer@notesactions%
	}
}
\newcommand*{\miniframeson}{\let\beamer@writeslidentry=\beamer@writeslidentry@miniframeson}
\newcommand*{\miniframesoff}{\let\beamer@writeslidentry=\beamer@writeslidentry@miniframesoff}
\makeatother

% Distance between points of subsections in miniframe navigation
% siehe: http://tex.stackexchange.com/questions/288548/beamer-miniframes-horizontal-space-between-dots-when-using-the-compress-option
\makeatletter
\def\slideentry#1#2#3#4#5#6{%
  %section number, subsection number, slide number, first/last frame, page number, part number
  \ifnum#6=\c@part\ifnum#2>0\ifnum#3>0%
    \ifbeamer@compress%
      \advance\beamer@xpos by1\relax%
      \ifnum1=#3                        %%% NOTICE
				\ifnum1=#2\else
					\advance\beamer@xpos by1\relax% %%% THESE
				\fi
      \fi                               %%% LINE
    \else%
      \beamer@xpos=#3\relax%
      \beamer@ypos=#2\relax%
    \fi%
  \hbox to 0pt{%
    \beamer@tempdim=-\beamer@vboxoffset%
    \advance\beamer@tempdim by-\beamer@boxsize%
    \multiply\beamer@tempdim by\beamer@ypos%
    \advance\beamer@tempdim by -.05cm%
    \raise\beamer@tempdim\hbox{%
      \beamer@tempdim=\beamer@boxsize%
      \multiply\beamer@tempdim by\beamer@xpos%
      \advance\beamer@tempdim by -\beamer@boxsize%
      \advance\beamer@tempdim by 1pt%
      \kern\beamer@tempdim
      \global\beamer@section@min@dim\beamer@tempdim
      \hbox{\beamer@link(#4){%
          \usebeamerfont{mini frame}%
          \ifnum\c@section=#1%
            \ifnum\c@subsection=#2%
              \usebeamercolor[fg]{mini frame}%
              \ifnum\c@subsectionslide=#3%
                \usebeamertemplate{mini frame}%\beamer@minislidehilight%
              \else%
                \usebeamertemplate{mini frame in current subsection}%\beamer@minisliderowhilight%
              \fi%
            \else%
              \usebeamercolor{mini frame}%
              %\color{fg!50!bg}%
              \usebeamertemplate{mini frame in other subsection}%\beamer@minislide%
            \fi%
          \else%
            \usebeamercolor{mini frame}%
            %\color{fg!50!bg}%
            \usebeamertemplate{mini frame in other subsection}%\beamer@minislide%
          \fi%
        }}}\hskip-10cm plus 1fil%
  }\fi\fi%
  \else%
  \fakeslideentry{#1}{#2}{#3}{#4}{#5}{#6}%
  \fi\ignorespaces
}
